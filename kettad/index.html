
<!doctype html>
<html lang="et" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Kooliarvuti JUKU igavene digitaalne elu">
      
      
        <meta name="author" content="juku3000">
      
      
        <link rel="canonical" href="https://j3k.infoaed.ee/kettad/">
      
      
        <link rel="prev" href="../videod/">
      
      
        <link rel="next" href="../tarkvara-kataloog/">
      
      
      <link rel="icon" href="../images/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Ketaste lugemine - juku3000</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Ketaste lugemine - juku3000" >
      
        <meta  property="og:description"  content="Kooliarvuti JUKU igavene digitaalne elu" >
      
        <meta  property="og:image"  content="https://j3k.infoaed.ee/assets/images/social/kettad.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://j3k.infoaed.ee/kettad/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Ketaste lugemine - juku3000" >
      
        <meta  name="twitter:description"  content="Kooliarvuti JUKU igavene digitaalne elu" >
      
        <meta  name="twitter:image"  content="https://j3k.infoaed.ee/assets/images/social/kettad.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kuidas-lugedakirjutada-juku-ketaste-tommiseid" class="md-skip">
          Keri sisuni
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="PÃ¤is">
    <a href=".." title="juku3000" class="md-header__button md-logo" aria-label="juku3000" data-md-component="logo">
      
  <img src="../images/juku3000_small.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            juku3000
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ketaste lugemine
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Automaatne heledus"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Automaatne heledus" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Tekst tumedal tasutal"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Tekst tumedal tasutal" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Tekst heledal taustal"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Tekst heledal taustal" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/infoaed/juku3000" title="Ava repositooriumis" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    infoaed/juku3000
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<!-- Determine classes -->




<!-- Navigation -->
<nav
  class="md-nav md-nav--primary"
  aria-label="Navigatsioon"
  data-md-level="0"
>

  <!-- Site title -->
  <label class="md-nav__title" for="__drawer">
    <a
      href=".."
      title="juku3000"
      class="md-nav__button md-logo"
      aria-label="juku3000"
      data-md-component="logo"
    >
      <!--
  <img src="../images/juku3000_small.svg" alt="logo">
-->
      <img src="/images/juku3000_2.svg" alt="logo">
    </a>
    <!--juku3000-->
  </label>

  <!-- Repository information -->
  
    <div class="md-nav__source">
      <a href="https://github.com/infoaed/juku3000" title="Ava repositooriumis" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    infoaed/juku3000
  </div>
</a>
    </div>
  

  <!-- Navigation list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tere, Juhan!
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ajajoon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    JUKU elutsÃ¼kkel
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../juku-k%C3%A4sud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EKDOSi kasutamine
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../videod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Videote salvestamine
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Ketaste lugemine
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Ketaste lugemine
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Sisukord">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Sisukord
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#juku-ketaste-spetsiifiline-topeltsegadus" class="md-nav__link">
    <span class="md-ellipsis">
      JUKU ketaste spetsiifiline topeltsegadus
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#millega-ja-mispidi-neid-siis-lugeda" class="md-nav__link">
    <span class="md-ellipsis">
      Millega ja mispidi neid siis lugeda?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loppseis-ja-too-viljad" class="md-nav__link">
    <span class="md-ellipsis">
      LÃµppseis ja tÃ¶Ã¶ viljad
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tarkvara-kataloog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tarkvara kataloog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../mame-k%C3%A4ivitamine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MAME kÃ¤ivitamine
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://infoaed.ee/juku" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ð¾ Proovi JUKUt veebis! ð¾
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Sisukord">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Sisukord
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#juku-ketaste-spetsiifiline-topeltsegadus" class="md-nav__link">
    <span class="md-ellipsis">
      JUKU ketaste spetsiifiline topeltsegadus
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#millega-ja-mispidi-neid-siis-lugeda" class="md-nav__link">
    <span class="md-ellipsis">
      Millega ja mispidi neid siis lugeda?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loppseis-ja-too-viljad" class="md-nav__link">
    <span class="md-ellipsis">
      LÃµppseis ja tÃ¶Ã¶ viljad
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="kuidas-lugedakirjutada-juku-ketaste-tommiseid">Kuidas lugeda/kirjutada JUKU ketaste tÃµmmiseid?<a class="headerlink" href="#kuidas-lugedakirjutada-juku-ketaste-tommiseid" title="Permanent link">&para;</a></h1>
<p><strong>Aastal 2022 ei olnud veel dokumenteeritud, millega ja kuidas lugeda JUKU kahepoolseid flopisid ja huvilised katsetasid kettatÃµmmiste lugemist eri tÃ¶Ã¶riistadega, saavutades mÃµnedega neist osalist edu. Allolev on kogemuslugu sellest, kuidas vÃµtsin kÃ¤tte ja nÃ¤risin end lÃ¤bi JUKU flopiketta andmevormingust, mida selle kÃ¤igus Ãµppisin ja pidasin vajalikuks avalikkusega jagada. Lugu on tÃ¤iendatud Ã¼ldistava raamistuse, tÃ¤psemate arvutuste ja praktiliste soovitustega lÃµpuosas.</strong></p>
<p>JUKU 786/788 kB kettad on kahepoolsed topelttihedusega (DSDD) kettad, millel on kummalgi poolel 80 rada, mis on jaotatud 40 sektorisse, millest igaÃ¼ks mahutab 128 baiti. See teeb kokku 2x80 = 160 rada, 40x128 = 5120 baiti ehk 5Â kB ja kokku ketta suuruseks 160x5120 = 819Â 200 baiti ehk 819Â kB. Lugemise teeb keerukaks, et need baidid pole talletatud sisu mÃµttes mitte jÃ¤rjest, vaid "<a href="https://www.seasip.info/Cpm/skew.html">segamini paisatud</a>". SeetÃµttu ei vÃµi seda vÃµtta jÃ¤rjestikuse 819 kB andmekogumina ja selle osiste olemasolu ignoreerida, vaid tuleb segadus selle eri taseme pÃµhjusest lÃ¤htuvalt likvideerida.</p>
<p>TÃ¶Ã¶ teevad Ã¤ra <a href="http://www.moria.de/~michael/cpmtools/"><em>cpmtools</em></a> ja <a href="https://www.seasip.info/Unix/LibDsk/"><em>libdsk</em></a> kÃ¤sikÃ¤es ning vajalikud konfifailid on:</p>
<ul>
<li><a href="https://github.com/infoaed/juku3000/blob/master/src/diskdefs">diskdefs</a> (vÃµib kÃ¤ia nt <code>/etc/cpmtools</code> vÃµi <code>/usr/local/share</code> alla)</li>
<li><a href="https://github.com/infoaed/juku3000/blob/master/src/libdskrc">libdskrc</a> (vÃµib kÃ¤ia nt <code>/usr/local/share/LibDsk</code> alla vÃµi kodukataloogi kujul <code>.libdskrc</code>)</li>
</ul>
<p>Aga huvilistele ka veidi pikemalt kÃ¶Ã¶gipoolest...</p>
<table>
<thead>
<tr>
<th style="text-align: center;">FDMAINT</th>
<th style="text-align: center;">DEC Rainbow 100</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="FDMAINT ketast kontrollimas, vÃ¤ljast sisse ja Ã¼ks pool korraga" src="/images/disk5.png" /></td>
<td style="text-align: center;"><img alt="DEC Rainbow 100 manuaal" src="/images/rainbow-logo.png" /></td>
</tr>
</tbody>
</table>
<p>JUKU jaoks fundamentaalsel opsÃ¼steemi tasemel lÃ¤htutakse CP/Mi <a href="https://en.wikipedia.org/wiki/CP/M#Basic_Input_Output_System">128-baidisest sektorisuurusest</a>, mis tÃ¤hendab, et rajad on kettal jagatud 40 sektorisse ja iga rada on 40x128 = 5120 baiti. FÃ¼Ã¼silisel JUKU flopil on rajad aga jagatud 10 sektorisse, mille kaupa <a href="https://en.wikipedia.org/wiki/Modified_frequency_modulation#MFM_coding">arvutatakse ja kirjutatakse tegelikule fÃ¼Ã¼silisele kettale</a> andmete kontrollsummad. See tÃ¤hendab, et fÃ¼Ã¼silisel kettal on CP/Mi 128-baidised sektorid omakorda koondatud neljakaupa 512 baidistesse sektoritesse, st raja maht on 10x4x128 = 10x512 = 5120 baiti. Kuna andmete kodeerimine/dekodeerimine flopi magnetpinnalt on <a href="https://en.wikipedia.org/wiki/Western_Digital_FD1771">korraldatud riistvara tasemel</a>, siis ei pea andmetÃµmmiste tÃ¶Ã¶tlemisel fÃ¼Ã¼silise flopiketta omadustele tÃ¤helepanu pÃ¶Ã¶rama ning vÃµib piirduda opsÃ¼steemi tasemel kÃ¤ttesaadava andmete vorminguga.</p>
<p>Kasutusel oleva <a href="https://en.wikipedia.org/wiki/CP/M#File_system">CP/Mi failisÃ¼steemi</a> loogilise ploki suurus on 4096 baiti, igasse sellisesse plokki mahub 32 sektorit, loogilisi plokke mahub kogu ketta mahu sisse 819200/4096 = 200. Ketta kaks esimest rada on reserveeritud sÃ¼steemi buutimiseks ja seetÃµttu jÃ¤Ã¤b loogiliste plokkide jaoks reaalselt 819200 - 2x5120 = 808Â 960 baiti, mis mahutab 808960/4096 = 197,5 loogilist plokki, mis oleks kokku 197,5x4096 / 1024 = 790 kB. Poolikut loogilist plokki kettale kirjutada pole tark mÃµte ja kuna esimene loogiline plokk on kasutusel kataloogiplokina, siis tegelike failide jaoks kasutatavaid plokke mahub kettale 196. Seega on JUKU ketta tegelik kasutatav maht 196x4096 = 802Â 816 baiti, mis on omakorda 802816/1024 = 784 kB. Kuna loogilise ploki maht on 32x128 = 4096 baiti ja fÃ¼Ã¼silise raja maht on 40x128 = 5120 baiti, siis isegi kui Ã¼ks on neist on lihtsalt 4Â kB ja teine 5Â kB, siis kettaga toimetamise eri tasmetel eri Ã¼hikutega opereerimine muudab Ã¼ldpildi kettatÃµmmiste tÃ¶Ã¶tlemisel segaseks ning teeb keerukamaks andmete struktuuri tuletamise nende sisust.</p>
<h2 id="juku-ketaste-spetsiifiline-topeltsegadus">JUKU ketaste spetsiifiline topeltsegadus<a class="headerlink" href="#juku-ketaste-spetsiifiline-topeltsegadus" title="Permanent link">&para;</a></h2>
<p>JUKU EKDOS 2.30 lÃ¤htekoodi pÃ¤ises on <a href="https://github.com/infoaed/juku3000/blob/master/src/EKDOS30.ASM">dokumenteeritud rasvases kirjas</a>, et ketta formaadi aluseks on <a href="http://www.bitsavers.org/pdf/dec/rainbow/QV069-GZ_Rainbow_100+_100B_Technical_Documentation_Apr85.pdf">DEC Rainbow 100</a> flopiformaat. LÃ¤htekood annab ka teada Ã¼lejÃ¤Ã¤nud <a href="https://github.com/infoaed/juku3000/blob/master/src/EKDOS30.ASM#L51-L57">juba mainitud parameetrid</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="p">;</span><span class="w"> </span><span class="n">DPB</span><span class="w"> </span><span class="n">constants</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">5</span><span class="s2">&quot; 96 TPI DSDD diskettes (2x80 tracks):</span>
<span class="n">TRACKS</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">160</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="mi">5</span><span class="s2">&quot;DD</span>
<span class="n">BLKSIZ</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">4096</span><span class="w">    </span><span class="p">;</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">length</span>
<span class="n">DIRTRK</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">2</span><span class="w">   </span><span class="p">;</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">track</span><span class="w"> </span><span class="c1"># (3 if 5&quot;SD)</span>
<span class="n">BLOCKS</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">197</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="p">(</span><span class="n">TRACKS</span><span class="o">-</span><span class="n">DIRTRK</span><span class="p">)</span><span class="o">*</span><span class="n">CPMSPT</span><span class="o">/</span><span class="p">(</span><span class="n">BLKSIZ</span><span class="o">/</span><span class="mi">128</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
<span class="n">DIRENT</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">128</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">entries</span>
<span class="n">DIRCHK</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">20</span><span class="n">H</span>
</code></pre></div>

<p>Need vastavad Ã¼ldjoontes Ã¼lal tehtud arvutustele, kuigi kommentaaris toodud tehte <code>(TRACKS-DIRTRK)*CPMSPT/(BLKSIZ/128)-1</code> tulemuseks oleks tegelikult 196,5, millest on justkui Ã¼mardamise teel saadud 197. Koodis kasutatud vÃ¤Ã¤rtus on kÃ¼ll korrektne, aga selgituseks toodud tehe vÃµib olla pÃµhjuseks, miks toob opsÃ¼steem JUKU flopiketta kasutatavaks mahuks 786 kB, sest 196,5x4096 = 804864 baiti, mille jÃ¤rel 804864/1024 = 786 kB. Reaalsuses mahub aga JUKU flopile kas 784 kB jagu faile vÃµi 788Â kB jagu loogilisi plokke koos kataloogiplokiga. Lisanduv poolik loogiline plokk on opsÃ¼steemile kÃ¤ttesaadav ja seega pole avakraanil toodud osutused 786 kB ketastele otseselt valed, aga ei JUKU enda ega CP/Mi tarkvara ei suuda Ã¼ldiselt fantoomploki 2048 baidiga korrektselt Ã¼mber kÃ¤ia ning parimal juhul saab seda kasutada salajaste sÃµnumite talletamiseks.</p>
<p>Kuna JUKU flopid ei ole andmete keerulise struktuuri tÃµttu loetavad tavapÃ¤raste CP/Mi andmetÃµmmiste tÃ¶Ã¶tlemise tÃ¶Ã¶riistade jaoks, siis tasub panna tÃ¤hele, et juba DEC Rainbow 100 on <a href="https://en.wikipedia.org/wiki/Rainbow_100#Problems">ajalooliselt tunnustatud peavalu</a>, sest selle paisktabel ei Ã¼hildunud teiste tootjate standarditega. JUKU kasutab/viitab Rainbow kettaformaati ilmselt pigem juhuslikel pÃµhjustel vÃµi kuna selle kettalugeja Ã¼hendas kaks Ã¼hepoolset kettalugejat ning sobis seega teatud mÃ¤Ã¤ral koodidoonoriks -- igatahes JUKU paisktabel tundub peale vaadates veel omal moel eksootiline ja on <a href="https://github.com/infoaed/juku3000/blob/master/src/EKDOS30.ASM#L80-L93">samuti leitav lÃ¤htekoodist</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="o">;</span><span class="w"> </span><span class="o">***</span><span class="w"> </span><span class="nt">Sector</span><span class="w"> </span><span class="nt">translate</span><span class="w"> </span><span class="nt">vectors</span><span class="o">,</span><span class="w"> </span><span class="nt">two</span><span class="w"> </span><span class="nt">40</span><span class="w"> </span><span class="nt">byte</span><span class="w"> </span><span class="nt">areas</span><span class="w"> </span><span class="o">***</span>
<span class="o">;</span>
<span class="nt">TRANS</span><span class="o">:</span><span class="w">  </span><span class="nt">DB</span><span class="w">  </span><span class="nt">1</span><span class="o">,</span><span class="nt">2</span><span class="o">,</span><span class="nt">3</span><span class="o">,</span><span class="nt">4</span><span class="o">,</span><span class="nt">9</span><span class="o">,</span><span class="nt">10</span><span class="o">,</span><span class="nt">11</span><span class="o">,</span><span class="nt">12</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">17</span><span class="o">,</span><span class="nt">18</span><span class="o">,</span><span class="nt">19</span><span class="o">,</span><span class="nt">20</span><span class="o">,</span><span class="nt">25</span><span class="o">,</span><span class="nt">26</span><span class="o">,</span><span class="nt">27</span><span class="o">,</span><span class="nt">28</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">33</span><span class="o">,</span><span class="nt">34</span><span class="o">,</span><span class="nt">35</span><span class="o">,</span><span class="nt">36</span><span class="o">,</span><span class="nt">5</span><span class="o">,</span><span class="nt">6</span><span class="o">,</span><span class="nt">7</span><span class="o">,</span><span class="nt">8</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">13</span><span class="o">,</span><span class="nt">14</span><span class="o">,</span><span class="nt">15</span><span class="o">,</span><span class="nt">16</span><span class="o">,</span><span class="nt">21</span><span class="o">,</span><span class="nt">22</span><span class="o">,</span><span class="nt">23</span><span class="o">,</span><span class="nt">24</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">29</span><span class="o">,</span><span class="nt">30</span><span class="o">,</span><span class="nt">31</span><span class="o">,</span><span class="nt">32</span><span class="o">,</span><span class="nt">37</span><span class="o">,</span><span class="nt">38</span><span class="o">,</span><span class="nt">39</span><span class="o">,</span><span class="nt">40</span>
<span class="o">;</span>
<span class="nt">TRANS1</span><span class="o">:</span><span class="w"> </span><span class="nt">DB</span><span class="w">  </span><span class="nt">1</span><span class="o">,</span><span class="nt">2</span><span class="o">,</span><span class="nt">3</span><span class="o">,</span><span class="nt">4</span><span class="o">,</span><span class="nt">9</span><span class="o">,</span><span class="nt">10</span><span class="o">,</span><span class="nt">11</span><span class="o">,</span><span class="nt">12</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">17</span><span class="o">,</span><span class="nt">18</span><span class="o">,</span><span class="nt">19</span><span class="o">,</span><span class="nt">20</span><span class="o">,</span><span class="nt">25</span><span class="o">,</span><span class="nt">26</span><span class="o">,</span><span class="nt">27</span><span class="o">,</span><span class="nt">28</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">33</span><span class="o">,</span><span class="nt">34</span><span class="o">,</span><span class="nt">35</span><span class="o">,</span><span class="nt">36</span><span class="o">,</span><span class="nt">5</span><span class="o">,</span><span class="nt">6</span><span class="o">,</span><span class="nt">7</span><span class="o">,</span><span class="nt">8</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">13</span><span class="o">,</span><span class="nt">14</span><span class="o">,</span><span class="nt">15</span><span class="o">,</span><span class="nt">16</span><span class="o">,</span><span class="nt">21</span><span class="o">,</span><span class="nt">22</span><span class="o">,</span><span class="nt">23</span><span class="o">,</span><span class="nt">24</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">29</span><span class="o">,</span><span class="nt">30</span><span class="o">,</span><span class="nt">31</span><span class="o">,</span><span class="nt">32</span><span class="o">,</span><span class="nt">37</span><span class="o">,</span><span class="nt">38</span><span class="o">,</span><span class="nt">39</span><span class="o">,</span><span class="nt">40</span><span class="w"> </span>
</code></pre></div>

<p>Kui lÃ¤hemalt vaadata, siis on nÃ¤ha, et selline paisktabel ehk <em>skew table</em> koosneb tegelikult neljastest plokkidest nagu <code>1,2,3,4</code> vÃµi <code>33,34,35,36</code> ja tabeli lihtsustatud vÃ¤ljendus oleks Ãµigupoolest <code>1,3,5,7,9,2,4,6,8,10</code>. Selline oleks paisktabel, kui see mÃ¤Ã¤ratleda lÃ¤htuvalt JUKU flopide 4x128 = 512-baidistest <a href="https://cowlark.com/fluxengine/doc/disk-juku.html">fÃ¼Ã¼silistest sektoritest</a>. See tÃ¤hendab, et sektoreid iga Ã¼ksiku raja kohta loetakse nii, et esmalt loetakse paarituarvulise jÃ¤rjekorranumbriga ja siis kÃµik paarisarvulise jÃ¤rjekorranumbriga 512-baidisteks Ã¼hendatud sektorid, millest kumbagi on raja kohta viis. Sellist jÃ¤rjest lugemise vÃ¤ltimist oli omal ajal vÃ¤idetavalt vaja, et arvutid kettalt tulevaid andmeid <a href="https://www.autometer.de/unix4fun/z80pack/cpm2/ch6.htm#Section_6.6">ikka tÃ¶Ã¶delda jÃµuaks</a> ja puhvrid ei hakkaks Ã¼le ajama:</p>
<blockquote>
<p>"Standard CP/M systems are shipped with a skew factor of 6, where six physical sectors are skipped between each logical read operation. This skew factor allows enough time between sectors for most programs to load their buffers without missing the next sector. In particular computer systems that use fast processors, memory, and disk subsystems, the skew factor might be changed to improve overall response."</p>
</blockquote>
<p>Pole teada, kas sellist aeglustamist oli JUKU flopiseadmete puhul reaalselt vaja, aga tÃ¤napÃ¤eva mÃµistes on ilmselt tegu tarbetu abinÃµuga ning seetÃµttu ei tee me kindlasti midagi halba, kui paisktabelit loetavuse mÃµttes lihtsustame. KÃ¼ll aga ei piisa, kui sÃ¶Ã¶dame oma lihtsustatud vÃµi ka lihtsustamata paisktabeli <a href="https://www.mankier.com/5/diskdefs"><em>cpmtools</em>'ile</a>, sest kuigi ketta algus loetakse enam-vÃ¤hem, siis esimestest failidest edasi lÃ¤heb kÃµik juba parajaks segapudruks.</p>
<p>Kui seda valminud putru lÃ¤hemalt vaadelda, selgub et JUKU kettaformaadil veel teine standardist hÃ¤lbiv iseÃ¤rasus, mis ei seostu Ã¼ldse paisktabelitega ja muudab kettad tavalisi CP/Mi kettalid lugevatele tÃ¶Ã¶riistadele arusaamatuks. Nimelt kirjutatakse JUKU ketta Ã¼he poole rajad tÃ¤is ja siis minnakse teise poole radu kirjutama uuesti algusest, st ketta teisest servast. <a href="https://www.mankier.com/5/libdskrc">TavapÃ¤rane on kirjutada radu</a> kordamÃ¶Ã¶da Ã¼hele ja teisele poolele vÃµi hakata rajanumbritega Ã¼hte kettaserva jÃµudes nendega teiselt poolelt tagasi tulema. Seega on JUKU flopidel tavapÃ¤raste ketaste suhtes segadus kahes mÃµttes, esiteks paisktabeli tÃµttu ja teiseks radade paigutuse tÃµttu kettal. Ette rutates vÃµib Ã¼telda, et algse hÃ¼poteesi kohaselt kurja juureks oletatud paisktabel osutub radade segaduse lahendamise jÃ¤rel Ãµigupoolest tÃ¤iesti standardseks.</p>
<h2 id="millega-ja-mispidi-neid-siis-lugeda">Millega ja mispidi neid siis lugeda?<a class="headerlink" href="#millega-ja-mispidi-neid-siis-lugeda" title="Permanent link">&para;</a></h2>
<p>Tegelikult <a href="http://www.moria.de/~michael/cpmtools/"><em>cpmtools</em></a> koos <a href="https://www.seasip.info/Unix/LibDsk/"><em>libdsk</em>'i</a> kettaseadetega loeb JUKU diskid edukalt vÃ¤lja. MÃµlemad on olemas kÃµigile viisakatele tÃ¤napÃ¤eva opsÃ¼steemidele, aga peab veenduma, kas <em>cpmtools</em>'i seadetes ehk Ã¼lal viidatud <code>diskdef</code> failis saab viidata <em>libdsk</em>'i seadetes mÃ¤Ã¤ratletud <code>.libdskrc</code> kirjetele. Sisuliselt on vaja teha kahte asja:</p>
<ol>
<li>
<p>Tuleb <code>.libdiskrc</code> failis mÃ¤Ã¤ratleda kettatÃµmmis kui kahe lugemispeaga loetav, st parameeter <code>heads = 2</code> ja silindrite arvuks mÃ¤Ã¤rata Ã¼he poole radade arv <code>cylinders = 80</code>. Kettapooltele kirjutatavate radade jÃ¤rjekorra kohta peab Ã¼tlema, et neid kirjutatakse ketta vÃ¤ljast sissepoole liikudes jÃ¤rjest ning kui Ã¼ks pool saab tÃ¤is, siis jÃ¤tkatakse teise poolega uuesti vÃ¤ljast sissepoole ehk parameeter <code>sides = outout</code>. KettatÃµmmise tÃ¼Ã¼bi nimeks mÃ¤Ã¤rame JUKU ehk paneme pealkirjaks <code>[juku]</code>.</p>
</li>
<li>
<p>Tuleb <em>cpmtools</em>'i <code>diskdefs</code> failis mÃ¤Ã¤ratleda sobiv radade ja sektorite arv, mÃ¤Ã¤ratleda eriotstarbelised rajad nagu sÃ¼steemile mÃ¤Ã¤ratud kaks rada parameetriga <code>boottrk 2</code> ja failide asukohti kettal kirjeldav rada parameetriga <code>maxdir 128</code>. Ãtlasi tuleb <code>diskdefs</code> failis osutada, et kasutataks <em>libdsk</em>'i geomeetriat kettapoolte lugemiseks ning seda teeb parameeter <code>libdsk:format juku</code>. Siin tuleb nÃ¼Ã¼d mÃ¤Ã¤ratleda ka paisktabel ja seda on vÃµimalik mÃ¤Ã¤ratleda EKDOSi lÃ¤htekoodi viisil vÃµi lihtsustada nii, nagu Ã¼lal osutasin.</p>
</li>
</ol>
<p>Kui alustuseks vaadata JUKU enda utiliite, siis need nÃ¤itavad ketta eri parameetreid samuti Ã¼pris erinevalt:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">STAT</th>
<th style="text-align: center;">KULT</th>
<th style="text-align: center;">DOCTOR</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="STAT nÃ¤itab 40 sektorit raja kohta" src="/images/disk.png" /></td>
<td style="text-align: center;"><img alt="KULT nÃ¤itab ka paisktabelit" src="/images/disk4.png" /></td>
<td style="text-align: center;"><img alt="Software Soulutions DISK EDITOR &amp; DIAGNOSTICS annab kÃµige pÃµhjalikuma Ã¼levaate (aga ei erista 32 baidiseid plokke)" src="/images/disk2.png" /></td>
</tr>
</tbody>
</table>
<p>JUKU CP/Mil pÃµhinevale 128-baidisele sektorisuurusele truuks jÃ¤Ã¤des peaksime mÃ¤Ã¤rama <code>.libdiskrc</code> failis parameetrid ilmselt nii:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[juku-origin]</span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">JUKU E5101 5.25&quot; DSDD (2 x 80 x 40 * 128)</span>
<span class="na">sides</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">outout</span>
<span class="na">cylinders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">80</span>
<span class="na">heads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
<span class="na">secsize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">128</span>
<span class="na">sectors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">40</span>
<span class="na">datarate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">DD</span>
</code></pre></div>

<p>Samamoodi austades algset paisktabelit peaks olema <code>diskdefs</code> kirje (kÃ¼ll tuleb tabeli vÃ¤Ã¤rtused muuta nullist algavaks):</p>
<div class="codehilite"><pre><span></span><code>#<span class="w"> </span><span class="nv">JUKU</span><span class="w"> </span><span class="nv">E5101</span><span class="w"> </span><span class="nv">original</span><span class="w"> </span><span class="ss">(</span><span class="nv">DEC</span><span class="w"> </span><span class="nv">Rainbow</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="nv">feat</span><span class="w"> </span><span class="nv">DSDD</span><span class="ss">)</span>
<span class="nv">diskdef</span><span class="w"> </span><span class="nv">juku</span><span class="o">-</span><span class="nv">origin</span>
<span class="w">  </span><span class="nv">seclen</span><span class="w"> </span><span class="mi">128</span>
<span class="w">  </span><span class="nv">tracks</span><span class="w"> </span><span class="mi">160</span>
<span class="w">  </span><span class="nv">sectrk</span><span class="w"> </span><span class="mi">40</span>
<span class="w">  </span><span class="nv">blocksize</span><span class="w"> </span><span class="mi">4096</span>
<span class="w">  </span><span class="nv">skewtab</span><span class="w"> </span><span class="mi">0</span>,<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">8</span>,<span class="mi">9</span>,<span class="mi">10</span>,<span class="mi">11</span>,<span class="mi">16</span>,<span class="mi">17</span>,<span class="mi">18</span>,<span class="mi">19</span>,<span class="mi">24</span>,<span class="mi">25</span>,<span class="mi">26</span>,<span class="mi">27</span>,<span class="mi">32</span>,<span class="mi">33</span>,<span class="mi">34</span>,<span class="mi">35</span>,<span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">6</span>,<span class="mi">7</span>,<span class="mi">12</span>,<span class="mi">13</span>,<span class="mi">14</span>,<span class="mi">15</span>,<span class="mi">20</span>,<span class="mi">21</span>,<span class="mi">22</span>,<span class="mi">23</span>,<span class="mi">28</span>,<span class="mi">29</span>,<span class="mi">30</span>,<span class="mi">31</span>,<span class="mi">36</span>,<span class="mi">37</span>,<span class="mi">38</span>,<span class="mi">39</span>
<span class="w">  </span><span class="nv">boottrk</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="nv">maxdir</span><span class="w"> </span><span class="mi">128</span>
<span class="w">  </span><span class="nv">os</span><span class="w"> </span><span class="mi">2</span>.<span class="mi">2</span>
<span class="w">  </span><span class="nv">libdsk</span>:<span class="nv">format</span><span class="w"> </span><span class="nv">juku</span><span class="o">-</span><span class="nv">origin</span>
<span class="k">end</span>
</code></pre></div>

<p>Kui lihtsustame aga paisktabeli ja Ã¼hendame CP/Mi 128-baidised sektorid neljakaupa Ã¼heks 512-baidiseks fÃ¼Ã¼siliseks sektoriks, siis peaks sobima vastavalt:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[juku]</span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">JUKU E5101 5.25&quot; DSDD (2 x 80 x 10 * 512)</span>
<span class="na">sides</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">outout</span>
<span class="na">cylinders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">80</span>
<span class="na">heads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
<span class="na">secsize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">512</span>
<span class="na">sectors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10</span>
<span class="na">datarate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">DD</span>
</code></pre></div>

<p>Ja <em>cpmtools</em>'i <code>diskdefs</code> lÃ¼hendatud paisktabeliga on lÃµpuks ketta poolte lugemise segaduse eemaldamise jÃ¤rel tÃ¤iesti tavaline paiskfaktor vÃ¤Ã¤rtusega 2 ehk <code>skew 2</code>:</p>
<div class="codehilite"><pre><span></span><code>#<span class="w"> </span><span class="nv">JUKU</span><span class="w"> </span><span class="nv">E5101</span><span class="w"> </span>\<span class="nv">w</span><span class="w"> </span><span class="nv">optimized</span><span class="w"> </span><span class="nv">skew</span><span class="w"> </span><span class="ss">(</span><span class="nv">DEC</span><span class="w"> </span><span class="nv">Rainbow</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="nv">feat</span><span class="w"> </span><span class="nv">DSDD</span><span class="ss">)</span>
<span class="nv">diskdef</span><span class="w"> </span><span class="nv">juku</span>
<span class="w">  </span><span class="nv">seclen</span><span class="w"> </span><span class="mi">512</span>
<span class="w">  </span><span class="nv">tracks</span><span class="w"> </span><span class="mi">160</span>
<span class="w">  </span><span class="nv">sectrk</span><span class="w"> </span><span class="mi">10</span>
<span class="w">  </span><span class="nv">blocksize</span><span class="w"> </span><span class="mi">4096</span>
<span class="w">  </span><span class="nv">skew</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span>#<span class="nv">skewtab</span><span class="w"> </span><span class="mi">0</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">6</span>,<span class="mi">8</span>,<span class="mi">1</span>,<span class="mi">3</span>,<span class="mi">5</span>,<span class="mi">7</span>,<span class="mi">9</span>
<span class="w">  </span><span class="nv">boottrk</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="nv">maxdir</span><span class="w"> </span><span class="mi">128</span>
<span class="w">  </span><span class="nv">os</span><span class="w"> </span><span class="mi">2</span>.<span class="mi">2</span>
<span class="w">  </span><span class="nv">libdsk</span>:<span class="nv">format</span><span class="w"> </span><span class="nv">juku</span>
<span class="k">end</span>
</code></pre></div>

<p>Kuna <em>cpmtools</em>'i kÃµik versioonid kÃµigi <em>libdsk</em>'i versioonidega praktikas ei Ã¼hildu, siis pole vÃ¤listatud ka <em>libdsk</em>'i seadistustes mÃ¤Ã¤ratletud geomeetria ignoreerimine, aga sel juhul vÃµiks saada nÃ¤iteks kirjeldada kÃµik sektorid ja plokid Ã¼hel rajal Ã¼heainsa suure paisktabelina. Selline hÃ¤kk teeks tabeli umbes 160x10x4 â 6 kB pikkuseks, mis ei ole kÃ¼ll tÃ¤napeÃ¤va mÃµistes pÃ¤ris maailmalÃµpp, aga <em>cpmtools</em> ei pruugi vaikimisi nii pikka tabelit seedida. <em>Libdsk</em>'i seadistamisel vÃµiks doonoriks sobida ka mÃµne <em>acorn</em> flopi geomeetria, mis on Ã¼ks vÃ¤heseid, milles <code>outout</code> lugemisviis kasutusel olla olnud (vt <a href="https://www.mankier.com/5/libdskrc#Parameters">"used by some Acorn formats [and JUKU]"</a>). LÃµppeks vÃµib lihtsaim viis Gordioni sÃµlme raiumiseks olla, kui teha elementaarsed muudatused otse <em>cpmtools</em>'i lÃ¤htekoodi ja kompileerida see ise.</p>
<h2 id="loppseis-ja-too-viljad">LÃµppseis ja tÃ¶Ã¶ viljad<a class="headerlink" href="#loppseis-ja-too-viljad" title="Permanent link">&para;</a></h2>
<p>LÃµpptulemus nÃ¤eb <em>cpmtools</em>'i <code>fsed.cpm -f juku-origin ORIG.CPM</code> ekraanil vÃ¤lja nii:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Info (I)</th>
<th style="text-align: center;">Datamap (M)</th>
<th style="text-align: center;">Kataloogikirje (0x5000)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="JUKU E5101 algupÃ¤rase laotuse infotabel" src="/images/info-origin.png" /></td>
<td style="text-align: center;"><img alt="AlgupÃ¤rase laotuse andmekaart" src="/images/datamap-origin.png" /></td>
<td style="text-align: center;"><img alt="Ketta sisu peaks aga algupÃ¤rase/optimeeritud versiooni puhul juhul sama olema" src="/images/data.png" /></td>
</tr>
</tbody>
</table>
<p>Ãhtlasi peaks tÃ¶Ã¶tama kÃµik <a href="http://www.moria.de/~michael/cpmtools/"><em>cpmtools</em>'i kÃ¤sud</a>, millega brausida ketaste sisu ning teha failioperatsioone kopeerimisest kustutamiseni:</p>
<div class="codehilite"><pre><span></span><code>cpmls -f juku DISK.CPM
cpmls -f juku -licF DISK.CPM
cpmcp -f juku GAMES.CPM 0:*.* jukugames
cpmcp -f juku GAMESX.CPM jukugames/INDY.* 0:
</code></pre></div>

<p>Kui mÃ¤Ã¤rata <code>juku</code> keskkonnamuutujas <code>CPMTOOLSFMT</code> vaikimisi formaadiks, siis vÃµib <code>-f juku</code> ka Ã¤ra jÃ¤tta:</p>
<div class="codehilite"><pre><span></span><code><span class="n">CPMTOOLSFMT</span><span class="o">=</span><span class="s2">&quot;juku&quot;</span>
<span class="k">export</span><span class="w"> </span><span class="n">CPMTOOLSFMT</span>
</code></pre></div>

<p>Toetatud kettatÃ¼Ã¼pide ja -vormingute nimekirju <em>libdsk</em>'i poolel nÃ¤itavad <code>dskutil -types</code> ja <code>dskutil -formats</code>, <em>cpmtools</em> lubatud formaatide nimekirja ei paista vÃ¤ljastavat ja nendega tuleb tutvuda <code>diskdefs</code> seadistusfaili tasemel. Ãigupoolest on JUKU ketaste lugemiseks tÃ¤iendavate <em>libdsk</em>'i vahenditeta vaja <em>cpmtools</em>'i lÃ¤htekoodi tÃ¤iendada vaid Ã¼he reaga kahes funktsioons, mis juhendaks neid otsima radu kettatÃµmmisel Ãµigest kohast ja sellise tÃ¤iendusega <a href="http://star.gmobb.jp/koji/cgi/wiki.cgi?page=CpmtoolsGUI">CpmtoolsGUI</a> eksperimentaalse JUKU versiooni leiab <a href="http://infoaed.ee/juku/CpmtoolsGUI_JUKU.zip">siit</a>.</p>
<p>Alates <a href="https://github.com/davidgiven/fluxengine/pull/796">2025. aasta juulist</a> suudab aga lisapingutusteta tÃ¶Ã¶delda JUKU kettaid ka <a href="https://github.com/davidgiven/fluxengine/releases/tag/dev">Fluxengine'i arendusversioon</a>.</p>
<p>On kÃ¼ll mÃµnevÃµrra tÃ¼Ã¼tu kaevuda ajalooliste kettaformaatide iseÃ¤rasustesse, kuid mÃµningase pusimise ja loomkatsete tulemusel saab ka maailma kÃµige unikaalsema CP/Mi kettaformaadi loetud. JUKU tunnustuseks vÃµib Ã¼telda, et tÃµenÃ¤oliselt pole kunagi eksisteerinud Ã¼htegi teist arvutisÃ¼steemi, mis oleks ilma pusserdamiseta JUKU kettaid suutnud lugeda -- seega kaksteist punkti ja ugrikrÃ¼pto eriauhind teadurile, kes selle vormingu vÃ¤lja mÃµtles!</p>
<p>P. S. FÃ¼Ã¼silistest ketastest tÃµmmiste tegemine on ka huvitav, aga eraldi kirjatÃ¼kki vÃ¤Ã¤riv teema.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "header.autohide", "content.code.copy", "content.footnote.tooltips"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Kopeeritud", "clipboard.copy": "Kopeeri l\u00f5ikelauale", "search.result.more.one": "1 veel sellel lehel", "search.result.more.other": "# veel sellel lehel", "search.result.none": "Otsingule ei leitud \u00fchtegi vastet", "search.result.one": "Leiti \u00fcks tulemus", "search.result.other": "Leiti # tulemust", "search.result.placeholder": "Otsimiseks kirjuta siia", "search.result.term.missing": "Puudub", "select.version": "Vali versioon"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>