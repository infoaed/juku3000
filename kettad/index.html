
<!doctype html>
<html lang="et" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Kooliarvuti JUKU igavene digitaalne elu">
      
      
        <meta name="author" content="juku3000">
      
      
        <link rel="canonical" href="https://j3k.infoaed.ee/kettad/">
      
      
        <link rel="prev" href="../videod/">
      
      
        <link rel="next" href="../m%C3%A4ngude-ketas-2024/">
      
      
        
      
      
      <link rel="icon" href="../images/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Ketaste lugemine - juku3000</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
<meta property="og:type" content="website" />
<meta property="og:title" content="Ketaste lugemine - juku3000" />
<meta property="og:description" content="Kooliarvuti JUKU igavene digitaalne elu" />
<meta property="og:image" content="https://j3k.infoaed.ee/assets/images/social/kettad.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:url" content="https://j3k.infoaed.ee/kettad/" />
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:title" content="Ketaste lugemine - juku3000" />
<meta property="twitter:description" content="Kooliarvuti JUKU igavene digitaalne elu" />
<meta property="twitter:image" content="https://j3k.infoaed.ee/assets/images/social/kettad.png" />
</head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#kuidas-lugedakirjutada-juku-ketaste-tommiseid" class="md-skip">
          Keri sisuni
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="P√§is">
    <a href=".." title="juku3000" class="md-header__button md-logo" aria-label="juku3000" data-md-component="logo">
      
  <img src="../images/juku3000_small.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            juku3000
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ketaste lugemine
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Automaatne heledus"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Automaatne heledus" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Tekst tumedal tasutal"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Tekst tumedal tasutal" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="indigo"  aria-label="Tekst heledal taustal"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Tekst heledal taustal" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/infoaed/juku3000" title="Ava repositooriumis" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    infoaed/juku3000
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<!-- Determine classes -->




<!-- Navigation -->
<nav
  class="md-nav md-nav--primary"
  aria-label="Navigatsioon"
  data-md-level="0"
>

  <!-- Site title -->
  <label class="md-nav__title" for="__drawer">
    <a
      href=".."
      title="juku3000"
      class="md-nav__button md-logo"
      aria-label="juku3000"
      data-md-component="logo"
    >
      <!--
  <img src="../images/juku3000_small.svg" alt="logo">
-->
      <img src="/images/juku3000_2.svg" alt="logo">
    </a>
    <!--juku3000-->
  </label>

  <!-- Repository information -->
  
    <div class="md-nav__source">
      <a href="https://github.com/infoaed/juku3000" title="Ava repositooriumis" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    infoaed/juku3000
  </div>
</a>
    </div>
  

  <!-- Navigation list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tere, Juhan!
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ajajoon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    JUKU eluts√ºkkel
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../juku-k%C3%A4sud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EKDOSi kasutamine
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../mame-k%C3%A4ivitamine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MAME k√§ivitamine
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../videod/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Videote salvestamine
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Ketaste lugemine
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Ketaste lugemine
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Sisukord">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Sisukord
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#juku-ketaste-spetsiifiline-topeltsegadus" class="md-nav__link">
    <span class="md-ellipsis">
      
        JUKU ketaste spetsiifiline topeltsegadus
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#millega-ja-mispidi-neid-siis-lugeda" class="md-nav__link">
    <span class="md-ellipsis">
      
        Millega ja mispidi neid siis lugeda?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loppseis-ja-too-viljad" class="md-nav__link">
    <span class="md-ellipsis">
      
        L√µppseis ja t√∂√∂ viljad
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../m%C3%A4ngude-ketas-2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    M√§ngude ketas 2024
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../porditud-m%C3%A4ngud-2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    M√§ngude ketas 2025
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tarkvara-kataloog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tarkvara kataloog
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://infoaed.ee/juku" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    üëæ Proovi JUKUt veebis! üëæ
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Sisukord">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Sisukord
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#juku-ketaste-spetsiifiline-topeltsegadus" class="md-nav__link">
    <span class="md-ellipsis">
      
        JUKU ketaste spetsiifiline topeltsegadus
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#millega-ja-mispidi-neid-siis-lugeda" class="md-nav__link">
    <span class="md-ellipsis">
      
        Millega ja mispidi neid siis lugeda?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loppseis-ja-too-viljad" class="md-nav__link">
    <span class="md-ellipsis">
      
        L√µppseis ja t√∂√∂ viljad
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="kuidas-lugedakirjutada-juku-ketaste-tommiseid">Kuidas lugeda/kirjutada JUKU ketaste t√µmmiseid?<a class="headerlink" href="#kuidas-lugedakirjutada-juku-ketaste-tommiseid" title="Permanent link">&para;</a></h1>
<p><strong>Aastal 2022 ei olnud veel dokumenteeritud, millega ja kuidas lugeda JUKU kahepoolseid flopisid ja huvilised katsetasid kettat√µmmiste lugemist eri t√∂√∂riistadega, saavutades m√µnedega neist osalist edu. Allolev on kogemuslugu sellest, kuidas v√µtsin k√§tte ja n√§risin end l√§bi JUKU flopiketta andmevormingust, mida selle k√§igus √µppisin ja pidasin vajalikuks avalikkusega jagada. Lugu on t√§iendatud √ºldistava raamistuse, t√§psemate arvutuste ja praktiliste soovitustega l√µpuosas.</strong></p>
<p>JUKU 786/788 kB kettad on kahepoolsed topelttihedusega (DSDD) kettad, millel on kummalgi poolel 80 rada, mis on jaotatud 40 sektorisse, millest iga√ºks mahutab 128 baiti. See teeb kokku 2x80 = 160 rada, 40x128 = 5120 baiti ehk 5¬†kB ja kokku ketta suuruseks 160x5120 = 819¬†200 baiti ehk 819¬†kB. Lugemise teeb keerukaks, et need baidid pole talletatud sisu m√µttes mitte j√§rjest, vaid "<a href="https://www.seasip.info/Cpm/skew.html">segamini paisatud</a>". Seet√µttu ei v√µi seda v√µtta j√§rjestikuse 819 kB andmekogumina ja selle osiste olemasolu ignoreerida, vaid tuleb segadus selle eri taseme p√µhjusest l√§htuvalt likvideerida.</p>
<p>T√∂√∂ teevad √§ra <a href="http://www.moria.de/~michael/cpmtools/"><em>cpmtools</em></a> ja <a href="https://www.seasip.info/Unix/LibDsk/"><em>libdsk</em></a> k√§sik√§es ning vajalikud konfifailid on:</p>
<ul>
<li><a href="https://github.com/infoaed/juku3000/blob/master/src/diskdefs">diskdefs</a> (v√µib k√§ia nt <code>/etc/cpmtools</code> v√µi <code>/usr/local/share</code> alla)</li>
<li><a href="https://github.com/infoaed/juku3000/blob/master/src/libdskrc">libdskrc</a> (v√µib k√§ia nt <code>/usr/local/share/LibDsk</code> alla v√µi kodukataloogi kujul <code>.libdskrc</code>)</li>
</ul>
<p>Aga huvilistele ka veidi pikemalt k√∂√∂gipoolest...</p>
<table>
<thead>
<tr>
<th style="text-align: center;">FDMAINT</th>
<th style="text-align: center;">DEC Rainbow 100</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="FDMAINT ketast kontrollimas, v√§ljast sisse ja √ºks pool korraga" src="/images/disk5.png" /></td>
<td style="text-align: center;"><img alt="DEC Rainbow 100 manuaal" src="/images/rainbow-logo.png" /></td>
</tr>
</tbody>
</table>
<p>JUKU jaoks fundamentaalsel ops√ºsteemi tasemel l√§htutakse CP/Mi <a href="https://en.wikipedia.org/wiki/CP/M#Basic_Input_Output_System">128-baidisest sektorisuurusest</a>, mis t√§hendab, et rajad on kettal jagatud 40 sektorisse ja iga rada on 40x128 = 5120 baiti. F√º√ºsilisel JUKU flopil on rajad aga jagatud 10 sektorisse, mille kaupa <a href="https://en.wikipedia.org/wiki/Modified_frequency_modulation#MFM_coding">arvutatakse ja kirjutatakse tegelikule f√º√ºsilisele kettale</a> andmete kontrollsummad. See t√§hendab, et f√º√ºsilisel kettal on CP/Mi 128-baidised sektorid omakorda koondatud neljakaupa 512 baidistesse sektoritesse, st raja maht on 10x4x128 = 10x512 = 5120 baiti. Kuna andmete kodeerimine/dekodeerimine flopi magnetpinnalt on <a href="https://en.wikipedia.org/wiki/Western_Digital_FD1771">korraldatud riistvara tasemel</a>, siis ei pea andmet√µmmiste t√∂√∂tlemisel f√º√ºsilise flopiketta omadustele t√§helepanu p√∂√∂rama ning v√µib piirduda ops√ºsteemi tasemel k√§ttesaadava andmete vorminguga.</p>
<p>Kasutusel oleva <a href="https://en.wikipedia.org/wiki/CP/M#File_system">CP/Mi failis√ºsteemi</a> loogilise ploki suurus on 4096 baiti, igasse sellisesse plokki mahub 32 sektorit, loogilisi plokke mahub kogu ketta mahu sisse 819200/4096 = 200. Ketta kaks esimest rada on reserveeritud s√ºsteemi buutimiseks ja seet√µttu j√§√§b loogiliste plokkide jaoks reaalselt 819200 - 2x5120 = 808¬†960 baiti, mis mahutab 808960/4096 = 197,5 loogilist plokki, mis oleks kokku 197,5x4096 / 1024 = 790 kB. Poolikut loogilist plokki kettale kirjutada pole tark m√µte ja kuna esimene loogiline plokk on kasutusel kataloogiplokina, siis tegelike failide jaoks kasutatavaid plokke mahub kettale 196. Seega on JUKU ketta tegelik kasutatav maht 196x4096 = 802¬†816 baiti, mis on omakorda 802816/1024 = 784 kB. Kuna loogilise ploki maht on 32x128 = 4096 baiti ja f√º√ºsilise raja maht on 40x128 = 5120 baiti, siis isegi kui √ºks on neist on lihtsalt 4¬†kB ja teine 5¬†kB, siis kettaga toimetamise eri tasmetel eri √ºhikutega opereerimine muudab √ºldpildi kettat√µmmiste t√∂√∂tlemisel segaseks ning teeb keerukamaks andmete struktuuri tuletamise nende sisust.</p>
<h2 id="juku-ketaste-spetsiifiline-topeltsegadus">JUKU ketaste spetsiifiline topeltsegadus<a class="headerlink" href="#juku-ketaste-spetsiifiline-topeltsegadus" title="Permanent link">&para;</a></h2>
<p>JUKU EKDOS 2.30 l√§htekoodi p√§ises on <a href="https://github.com/infoaed/juku3000/blob/master/src/EKDOS30.ASM">dokumenteeritud rasvases kirjas</a>, et ketta formaadi aluseks on <a href="http://www.bitsavers.org/pdf/dec/rainbow/QV069-GZ_Rainbow_100+_100B_Technical_Documentation_Apr85.pdf">DEC Rainbow 100</a> flopiformaat. L√§htekood annab ka teada √ºlej√§√§nud <a href="https://github.com/infoaed/juku3000/blob/master/src/EKDOS30.ASM#L51-L57">juba mainitud parameetrid</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="p">;</span><span class="w"> </span><span class="n">DPB</span><span class="w"> </span><span class="n">constants</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="mi">5</span><span class="s2">&quot; 96 TPI DSDD diskettes (2x80 tracks):</span>
<span class="n">TRACKS</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">160</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="mi">5</span><span class="s2">&quot;DD</span>
<span class="n">BLKSIZ</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">4096</span><span class="w">    </span><span class="p">;</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">length</span>
<span class="n">DIRTRK</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">2</span><span class="w">   </span><span class="p">;</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">track</span><span class="w"> </span><span class="c1"># (3 if 5&quot;SD)</span>
<span class="n">BLOCKS</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">197</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="p">(</span><span class="n">TRACKS</span><span class="o">-</span><span class="n">DIRTRK</span><span class="p">)</span><span class="o">*</span><span class="n">CPMSPT</span><span class="o">/</span><span class="p">(</span><span class="n">BLKSIZ</span><span class="o">/</span><span class="mi">128</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
<span class="n">DIRENT</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">128</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="n">entries</span>
<span class="n">DIRCHK</span><span class="w">  </span><span class="n">EQU</span><span class="w"> </span><span class="mi">20</span><span class="n">H</span>
</code></pre></div>

<p>Need vastavad √ºldjoontes √ºlal tehtud arvutustele, kuigi kommentaaris toodud tehte <code>(TRACKS-DIRTRK)*CPMSPT/(BLKSIZ/128)-1</code> tulemuseks oleks tegelikult 196,5, millest on justkui √ºmardamise teel saadud 197. Koodis kasutatud v√§√§rtus on k√ºll korrektne, aga selgituseks toodud tehe v√µib olla p√µhjuseks, miks toob ops√ºsteem JUKU flopiketta kasutatavaks mahuks 786 kB, sest 196,5x4096 = 804864 baiti, mille j√§rel 804864/1024 = 786 kB. Reaalsuses mahub aga JUKU flopile kas 784 kB jagu faile v√µi 788¬†kB jagu loogilisi plokke koos kataloogiplokiga. Lisanduv poolik loogiline plokk on ops√ºsteemile k√§ttesaadav ja seega pole avakraanil toodud osutused 786 kB ketastele otseselt valed, aga ei JUKU enda ega CP/Mi tarkvara ei suuda √ºldiselt fantoomploki 2048 baidiga korrektselt √ºmber k√§ia ning parimal juhul saab seda kasutada salajaste s√µnumite talletamiseks.</p>
<p>Kuna JUKU flopid ei ole andmete keerulise struktuuri t√µttu loetavad tavap√§raste CP/Mi andmet√µmmiste t√∂√∂tlemise t√∂√∂riistade jaoks, siis tasub panna t√§hele, et juba DEC Rainbow 100 on <a href="https://en.wikipedia.org/wiki/Rainbow_100#Problems">ajalooliselt tunnustatud peavalu</a>, sest selle paisktabel ei √ºhildunud teiste tootjate standarditega. JUKU kasutab/viitab Rainbow kettaformaati ilmselt pigem juhuslikel p√µhjustel v√µi kuna selle kettalugeja √ºhendas kaks √ºhepoolset kettalugejat ning sobis seega teatud m√§√§ral koodidoonoriks -- igatahes JUKU paisktabel tundub peale vaadates veel omal moel eksootiline ja on <a href="https://github.com/infoaed/juku3000/blob/master/src/EKDOS30.ASM#L80-L93">samuti leitav l√§htekoodist</a>:</p>
<div class="codehilite"><pre><span></span><code><span class="o">;</span><span class="w"> </span><span class="o">***</span><span class="w"> </span><span class="nt">Sector</span><span class="w"> </span><span class="nt">translate</span><span class="w"> </span><span class="nt">vectors</span><span class="o">,</span><span class="w"> </span><span class="nt">two</span><span class="w"> </span><span class="nt">40</span><span class="w"> </span><span class="nt">byte</span><span class="w"> </span><span class="nt">areas</span><span class="w"> </span><span class="o">***</span>
<span class="o">;</span>
<span class="nt">TRANS</span><span class="o">:</span><span class="w">  </span><span class="nt">DB</span><span class="w">  </span><span class="nt">1</span><span class="o">,</span><span class="nt">2</span><span class="o">,</span><span class="nt">3</span><span class="o">,</span><span class="nt">4</span><span class="o">,</span><span class="nt">9</span><span class="o">,</span><span class="nt">10</span><span class="o">,</span><span class="nt">11</span><span class="o">,</span><span class="nt">12</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">17</span><span class="o">,</span><span class="nt">18</span><span class="o">,</span><span class="nt">19</span><span class="o">,</span><span class="nt">20</span><span class="o">,</span><span class="nt">25</span><span class="o">,</span><span class="nt">26</span><span class="o">,</span><span class="nt">27</span><span class="o">,</span><span class="nt">28</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">33</span><span class="o">,</span><span class="nt">34</span><span class="o">,</span><span class="nt">35</span><span class="o">,</span><span class="nt">36</span><span class="o">,</span><span class="nt">5</span><span class="o">,</span><span class="nt">6</span><span class="o">,</span><span class="nt">7</span><span class="o">,</span><span class="nt">8</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">13</span><span class="o">,</span><span class="nt">14</span><span class="o">,</span><span class="nt">15</span><span class="o">,</span><span class="nt">16</span><span class="o">,</span><span class="nt">21</span><span class="o">,</span><span class="nt">22</span><span class="o">,</span><span class="nt">23</span><span class="o">,</span><span class="nt">24</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">29</span><span class="o">,</span><span class="nt">30</span><span class="o">,</span><span class="nt">31</span><span class="o">,</span><span class="nt">32</span><span class="o">,</span><span class="nt">37</span><span class="o">,</span><span class="nt">38</span><span class="o">,</span><span class="nt">39</span><span class="o">,</span><span class="nt">40</span>
<span class="o">;</span>
<span class="nt">TRANS1</span><span class="o">:</span><span class="w"> </span><span class="nt">DB</span><span class="w">  </span><span class="nt">1</span><span class="o">,</span><span class="nt">2</span><span class="o">,</span><span class="nt">3</span><span class="o">,</span><span class="nt">4</span><span class="o">,</span><span class="nt">9</span><span class="o">,</span><span class="nt">10</span><span class="o">,</span><span class="nt">11</span><span class="o">,</span><span class="nt">12</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">17</span><span class="o">,</span><span class="nt">18</span><span class="o">,</span><span class="nt">19</span><span class="o">,</span><span class="nt">20</span><span class="o">,</span><span class="nt">25</span><span class="o">,</span><span class="nt">26</span><span class="o">,</span><span class="nt">27</span><span class="o">,</span><span class="nt">28</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">33</span><span class="o">,</span><span class="nt">34</span><span class="o">,</span><span class="nt">35</span><span class="o">,</span><span class="nt">36</span><span class="o">,</span><span class="nt">5</span><span class="o">,</span><span class="nt">6</span><span class="o">,</span><span class="nt">7</span><span class="o">,</span><span class="nt">8</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">13</span><span class="o">,</span><span class="nt">14</span><span class="o">,</span><span class="nt">15</span><span class="o">,</span><span class="nt">16</span><span class="o">,</span><span class="nt">21</span><span class="o">,</span><span class="nt">22</span><span class="o">,</span><span class="nt">23</span><span class="o">,</span><span class="nt">24</span>
<span class="w">    </span><span class="nt">DB</span><span class="w">  </span><span class="nt">29</span><span class="o">,</span><span class="nt">30</span><span class="o">,</span><span class="nt">31</span><span class="o">,</span><span class="nt">32</span><span class="o">,</span><span class="nt">37</span><span class="o">,</span><span class="nt">38</span><span class="o">,</span><span class="nt">39</span><span class="o">,</span><span class="nt">40</span><span class="w"> </span>
</code></pre></div>

<p>Kui l√§hemalt vaadata, siis on n√§ha, et selline paisktabel ehk <em>skew table</em> koosneb tegelikult neljastest plokkidest nagu <code>1,2,3,4</code> v√µi <code>33,34,35,36</code> ja tabeli lihtsustatud v√§ljendus oleks √µigupoolest <code>1,3,5,7,9,2,4,6,8,10</code>. Selline oleks paisktabel, kui see m√§√§ratleda l√§htuvalt JUKU flopide 4x128 = 512-baidistest <a href="https://cowlark.com/fluxengine/doc/disk-juku.html">f√º√ºsilistest sektoritest</a>. See t√§hendab, et sektoreid iga √ºksiku raja kohta loetakse nii, et esmalt loetakse paarituarvulise j√§rjekorranumbriga ja siis k√µik paarisarvulise j√§rjekorranumbriga 512-baidisteks √ºhendatud sektorid, millest kumbagi on raja kohta viis. Sellist j√§rjest lugemise v√§ltimist oli omal ajal v√§idetavalt vaja, et arvutid kettalt tulevaid andmeid <a href="https://www.autometer.de/unix4fun/z80pack/cpm2/ch6.htm#Section_6.6">ikka t√∂√∂delda j√µuaks</a> ja puhvrid ei hakkaks √ºle ajama:</p>
<blockquote>
<p>"Standard CP/M systems are shipped with a skew factor of 6, where six physical sectors are skipped between each logical read operation. This skew factor allows enough time between sectors for most programs to load their buffers without missing the next sector. In particular computer systems that use fast processors, memory, and disk subsystems, the skew factor might be changed to improve overall response."</p>
</blockquote>
<p>Pole teada, kas sellist aeglustamist oli JUKU flopiseadmete puhul reaalselt vaja, aga t√§nap√§eva m√µistes on ilmselt tegu tarbetu abin√µuga ning seet√µttu ei tee me kindlasti midagi halba, kui paisktabelit loetavuse m√µttes lihtsustame. K√ºll aga ei piisa, kui s√∂√∂dame oma lihtsustatud v√µi ka lihtsustamata paisktabeli <a href="https://www.mankier.com/5/diskdefs"><em>cpmtools</em>'ile</a>, sest kuigi ketta algus loetakse enam-v√§hem, siis esimestest failidest edasi l√§heb k√µik juba parajaks segapudruks.</p>
<p>Kui seda valminud putru l√§hemalt vaadelda, selgub et JUKU kettaformaadil veel teine standardist h√§lbiv ise√§rasus, mis ei seostu √ºldse paisktabelitega ja muudab kettad tavalisi CP/Mi kettalid lugevatele t√∂√∂riistadele arusaamatuks. Nimelt kirjutatakse JUKU ketta √ºhe poole rajad t√§is ja siis minnakse teise poole radu kirjutama uuesti algusest, st ketta teisest servast. <a href="https://www.mankier.com/5/libdskrc">Tavap√§rane on kirjutada radu</a> kordam√∂√∂da √ºhele ja teisele poolele v√µi hakata rajanumbritega √ºhte kettaserva j√µudes nendega teiselt poolelt tagasi tulema. Seega on JUKU flopidel tavap√§raste ketaste suhtes segadus kahes m√µttes, esiteks paisktabeli t√µttu ja teiseks radade paigutuse t√µttu kettal. Ette rutates v√µib √ºtelda, et algse h√ºpoteesi kohaselt kurja juureks oletatud paisktabel osutub radade segaduse lahendamise j√§rel √µigupoolest t√§iesti standardseks.</p>
<h2 id="millega-ja-mispidi-neid-siis-lugeda">Millega ja mispidi neid siis lugeda?<a class="headerlink" href="#millega-ja-mispidi-neid-siis-lugeda" title="Permanent link">&para;</a></h2>
<p>Tegelikult <a href="http://www.moria.de/~michael/cpmtools/"><em>cpmtools</em></a> koos <a href="https://www.seasip.info/Unix/LibDsk/"><em>libdsk</em>'i</a> kettaseadetega loeb JUKU diskid edukalt v√§lja. M√µlemad on olemas k√µigile viisakatele t√§nap√§eva ops√ºsteemidele, aga peab veenduma, kas <em>cpmtools</em>'i seadetes ehk √ºlal viidatud <code>diskdef</code> failis saab viidata <em>libdsk</em>'i seadetes m√§√§ratletud <code>.libdskrc</code> kirjetele. Sisuliselt on vaja teha kahte asja:</p>
<ol>
<li>
<p>Tuleb <code>.libdiskrc</code> failis m√§√§ratleda kettat√µmmis kui kahe lugemispeaga loetav, st parameeter <code>heads = 2</code> ja silindrite arvuks m√§√§rata √ºhe poole radade arv <code>cylinders = 80</code>. Kettapooltele kirjutatavate radade j√§rjekorra kohta peab √ºtlema, et neid kirjutatakse ketta v√§ljast sissepoole liikudes j√§rjest ning kui √ºks pool saab t√§is, siis j√§tkatakse teise poolega uuesti v√§ljast sissepoole ehk parameeter <code>sides = outout</code>. Kettat√µmmise t√º√ºbi nimeks m√§√§rame JUKU ehk paneme pealkirjaks <code>[juku]</code>.</p>
</li>
<li>
<p>Tuleb <em>cpmtools</em>'i <code>diskdefs</code> failis m√§√§ratleda sobiv radade ja sektorite arv, m√§√§ratleda eriotstarbelised rajad nagu s√ºsteemile m√§√§ratud kaks rada parameetriga <code>boottrk 2</code> ja failide asukohti kettal kirjeldav rada parameetriga <code>maxdir 128</code>. √útlasi tuleb <code>diskdefs</code> failis osutada, et kasutataks <em>libdsk</em>'i geomeetriat kettapoolte lugemiseks ning seda teeb parameeter <code>libdsk:format juku</code>. Siin tuleb n√º√ºd m√§√§ratleda ka paisktabel ja seda on v√µimalik m√§√§ratleda EKDOSi l√§htekoodi viisil v√µi lihtsustada nii, nagu √ºlal osutasin.</p>
</li>
</ol>
<p>Kui alustuseks vaadata JUKU enda utiliite, siis need n√§itavad ketta eri parameetreid samuti √ºpris erinevalt:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">STAT</th>
<th style="text-align: center;">KULT</th>
<th style="text-align: center;">DOCTOR</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="STAT n√§itab 40 sektorit raja kohta" src="/images/disk.png" /></td>
<td style="text-align: center;"><img alt="KULT n√§itab ka paisktabelit" src="/images/disk4.png" /></td>
<td style="text-align: center;"><img alt="Software Soulutions DISK EDITOR &amp; DIAGNOSTICS annab k√µige p√µhjalikuma √ºlevaate (aga ei erista 32 baidiseid plokke)" src="/images/disk2.png" /></td>
</tr>
</tbody>
</table>
<p>JUKU CP/Mil p√µhinevale 128-baidisele sektorisuurusele truuks j√§√§des peaksime m√§√§rama <code>.libdiskrc</code> failis parameetrid ilmselt nii:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[juku-origin]</span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">JUKU E5101 5.25&quot; DSDD (2 x 80 x 40 * 128)</span>
<span class="na">sides</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">outout</span>
<span class="na">cylinders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">80</span>
<span class="na">heads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
<span class="na">secsize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">128</span>
<span class="na">sectors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">40</span>
<span class="na">datarate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">DD</span>
</code></pre></div>

<p>Samamoodi austades algset paisktabelit peaks olema <code>diskdefs</code> kirje (k√ºll tuleb tabeli v√§√§rtused muuta nullist algavaks):</p>
<div class="codehilite"><pre><span></span><code>#<span class="w"> </span><span class="nv">JUKU</span><span class="w"> </span><span class="nv">E5101</span><span class="w"> </span><span class="nv">original</span><span class="w"> </span><span class="ss">(</span><span class="nv">DEC</span><span class="w"> </span><span class="nv">Rainbow</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="nv">feat</span><span class="w"> </span><span class="nv">DSDD</span><span class="ss">)</span>
<span class="nv">diskdef</span><span class="w"> </span><span class="nv">juku</span><span class="o">-</span><span class="nv">origin</span>
<span class="w">  </span><span class="nv">seclen</span><span class="w"> </span><span class="mi">128</span>
<span class="w">  </span><span class="nv">tracks</span><span class="w"> </span><span class="mi">160</span>
<span class="w">  </span><span class="nv">sectrk</span><span class="w"> </span><span class="mi">40</span>
<span class="w">  </span><span class="nv">blocksize</span><span class="w"> </span><span class="mi">4096</span>
<span class="w">  </span><span class="nv">skewtab</span><span class="w"> </span><span class="mi">0</span>,<span class="mi">1</span>,<span class="mi">2</span>,<span class="mi">3</span>,<span class="mi">8</span>,<span class="mi">9</span>,<span class="mi">10</span>,<span class="mi">11</span>,<span class="mi">16</span>,<span class="mi">17</span>,<span class="mi">18</span>,<span class="mi">19</span>,<span class="mi">24</span>,<span class="mi">25</span>,<span class="mi">26</span>,<span class="mi">27</span>,<span class="mi">32</span>,<span class="mi">33</span>,<span class="mi">34</span>,<span class="mi">35</span>,<span class="mi">4</span>,<span class="mi">5</span>,<span class="mi">6</span>,<span class="mi">7</span>,<span class="mi">12</span>,<span class="mi">13</span>,<span class="mi">14</span>,<span class="mi">15</span>,<span class="mi">20</span>,<span class="mi">21</span>,<span class="mi">22</span>,<span class="mi">23</span>,<span class="mi">28</span>,<span class="mi">29</span>,<span class="mi">30</span>,<span class="mi">31</span>,<span class="mi">36</span>,<span class="mi">37</span>,<span class="mi">38</span>,<span class="mi">39</span>
<span class="w">  </span><span class="nv">boottrk</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="nv">maxdir</span><span class="w"> </span><span class="mi">128</span>
<span class="w">  </span><span class="nv">os</span><span class="w"> </span><span class="mi">2</span>.<span class="mi">2</span>
<span class="w">  </span><span class="nv">libdsk</span>:<span class="nv">format</span><span class="w"> </span><span class="nv">juku</span><span class="o">-</span><span class="nv">origin</span>
<span class="k">end</span>
</code></pre></div>

<p>Kui lihtsustame aga paisktabeli ja √ºhendame CP/Mi 128-baidised sektorid neljakaupa √ºheks 512-baidiseks f√º√ºsiliseks sektoriks, siis peaks sobima vastavalt:</p>
<div class="codehilite"><pre><span></span><code><span class="k">[juku]</span>
<span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">JUKU E5101 5.25&quot; DSDD (2 x 80 x 10 * 512)</span>
<span class="na">sides</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">outout</span>
<span class="na">cylinders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">80</span>
<span class="na">heads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
<span class="na">secsize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">512</span>
<span class="na">sectors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10</span>
<span class="na">datarate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">DD</span>
</code></pre></div>

<p>Ja <em>cpmtools</em>'i <code>diskdefs</code> l√ºhendatud paisktabeliga on l√µpuks ketta poolte lugemise segaduse eemaldamise j√§rel t√§iesti tavaline paiskfaktor v√§√§rtusega 2 ehk <code>skew 2</code>:</p>
<div class="codehilite"><pre><span></span><code>#<span class="w"> </span><span class="nv">JUKU</span><span class="w"> </span><span class="nv">E5101</span><span class="w"> </span>\<span class="nv">w</span><span class="w"> </span><span class="nv">optimized</span><span class="w"> </span><span class="nv">skew</span><span class="w"> </span><span class="ss">(</span><span class="nv">DEC</span><span class="w"> </span><span class="nv">Rainbow</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="nv">feat</span><span class="w"> </span><span class="nv">DSDD</span><span class="ss">)</span>
<span class="nv">diskdef</span><span class="w"> </span><span class="nv">juku</span>
<span class="w">  </span><span class="nv">seclen</span><span class="w"> </span><span class="mi">512</span>
<span class="w">  </span><span class="nv">tracks</span><span class="w"> </span><span class="mi">160</span>
<span class="w">  </span><span class="nv">sectrk</span><span class="w"> </span><span class="mi">10</span>
<span class="w">  </span><span class="nv">blocksize</span><span class="w"> </span><span class="mi">4096</span>
<span class="w">  </span><span class="nv">skew</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span>#<span class="nv">skewtab</span><span class="w"> </span><span class="mi">0</span>,<span class="mi">2</span>,<span class="mi">4</span>,<span class="mi">6</span>,<span class="mi">8</span>,<span class="mi">1</span>,<span class="mi">3</span>,<span class="mi">5</span>,<span class="mi">7</span>,<span class="mi">9</span>
<span class="w">  </span><span class="nv">boottrk</span><span class="w"> </span><span class="mi">2</span>
<span class="w">  </span><span class="nv">maxdir</span><span class="w"> </span><span class="mi">128</span>
<span class="w">  </span><span class="nv">os</span><span class="w"> </span><span class="mi">2</span>.<span class="mi">2</span>
<span class="w">  </span><span class="nv">libdsk</span>:<span class="nv">format</span><span class="w"> </span><span class="nv">juku</span>
<span class="k">end</span>
</code></pre></div>

<p>Kuna <em>cpmtools</em>'i k√µik versioonid k√µigi <em>libdsk</em>'i versioonidega praktikas ei √ºhildu, siis pole v√§listatud ka <em>libdsk</em>'i seadistustes m√§√§ratletud geomeetria ignoreerimine, aga sel juhul v√µiks saada n√§iteks kirjeldada k√µik sektorid ja plokid √ºhel rajal √ºheainsa suure paisktabelina. Selline h√§kk teeks tabeli umbes 160x10x4 ‚âà 6 kB pikkuseks, mis ei ole k√ºll t√§nape√§va m√µistes p√§ris maailmal√µpp, aga <em>cpmtools</em> ei pruugi vaikimisi nii pikka tabelit seedida. <em>Libdsk</em>'i seadistamisel v√µiks doonoriks sobida ka m√µne <em>acorn</em> flopi geomeetria, mis on √ºks v√§heseid, milles <code>outout</code> lugemisviis kasutusel olla olnud (vt <a href="https://www.mankier.com/5/libdskrc#Parameters">"used by some Acorn formats [and JUKU]"</a>). L√µppeks v√µib lihtsaim viis Gordioni s√µlme raiumiseks olla, kui teha elementaarsed muudatused otse <em>cpmtools</em>'i l√§htekoodi ja kompileerida see ise.</p>
<h2 id="loppseis-ja-too-viljad">L√µppseis ja t√∂√∂ viljad<a class="headerlink" href="#loppseis-ja-too-viljad" title="Permanent link">&para;</a></h2>
<p>L√µpptulemus n√§eb <em>cpmtools</em>'i <code>fsed.cpm -f juku-origin ORIG.CPM</code> ekraanil v√§lja nii:</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Info (I)</th>
<th style="text-align: center;">Datamap (M)</th>
<th style="text-align: center;">Kataloogikirje (0x5000)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img alt="JUKU E5101 algup√§rase laotuse infotabel" src="/images/info-origin.png" /></td>
<td style="text-align: center;"><img alt="Algup√§rase laotuse andmekaart" src="/images/datamap-origin.png" /></td>
<td style="text-align: center;"><img alt="Ketta sisu peaks aga algup√§rase/optimeeritud versiooni puhul juhul sama olema" src="/images/data.png" /></td>
</tr>
</tbody>
</table>
<p>√úhtlasi peaks t√∂√∂tama k√µik <a href="http://www.moria.de/~michael/cpmtools/"><em>cpmtools</em>'i k√§sud</a>, millega brausida ketaste sisu ning teha failioperatsioone kopeerimisest kustutamiseni:</p>
<div class="codehilite"><pre><span></span><code>cpmls -f juku DISK.CPM
cpmls -f juku -licF DISK.CPM
cpmcp -f juku GAMES.CPM 0:*.* jukugames
cpmcp -f juku GAMESX.CPM jukugames/INDY.* 0:
</code></pre></div>

<p>Kui m√§√§rata <code>juku</code> keskkonnamuutujas <code>CPMTOOLSFMT</code> vaikimisi formaadiks, siis v√µib <code>-f juku</code> ka √§ra j√§tta:</p>
<div class="codehilite"><pre><span></span><code><span class="n">CPMTOOLSFMT</span><span class="o">=</span><span class="s2">&quot;juku&quot;</span>
<span class="k">export</span><span class="w"> </span><span class="n">CPMTOOLSFMT</span>
</code></pre></div>

<p>Toetatud kettat√º√ºpide ja -vormingute nimekirju <em>libdsk</em>'i poolel n√§itavad <code>dskutil -types</code> ja <code>dskutil -formats</code>, <em>cpmtools</em> lubatud formaatide nimekirja ei paista v√§ljastavat ja nendega tuleb tutvuda <code>diskdefs</code> seadistusfaili tasemel. √ïigupoolest on JUKU ketaste lugemiseks t√§iendavate <em>libdsk</em>'i vahenditeta vaja <em>cpmtools</em>'i l√§htekoodi t√§iendada vaid √ºhe reaga kahes funktsioons, mis juhendaks neid otsima radu kettat√µmmisel √µigest kohast ja sellise t√§iendusega <a href="http://star.gmobb.jp/koji/cgi/wiki.cgi?page=CpmtoolsGUI">CpmtoolsGUI</a> eksperimentaalse JUKU versiooni leiab <a href="http://infoaed.ee/juku/CpmtoolsGUI_JUKU.zip">siit</a>.</p>
<p>Alates <a href="https://github.com/davidgiven/fluxengine/pull/796">2025. aasta juulist</a> suudab aga lisapingutusteta t√∂√∂delda JUKU kettaid ka <a href="https://github.com/davidgiven/fluxengine/releases/tag/dev">Fluxengine'i arendusversioon</a>.</p>
<p>On k√ºll m√µnev√µrra t√º√ºtu kaevuda ajalooliste kettaformaatide ise√§rasustesse, kuid m√µningase pusimise ja loomkatsete tulemusel saab ka maailma k√µige unikaalsema CP/Mi kettaformaadi loetud. JUKU tunnustuseks v√µib √ºtelda, et t√µen√§oliselt pole kunagi eksisteerinud √ºhtegi teist arvutis√ºsteemi, mis oleks ilma pusserdamiseta JUKU kettaid suutnud lugeda -- seega kaksteist punkti ja ugrikr√ºpto eriauhind teadurile, kes selle vormingu v√§lja m√µtles!</p>
<p>P. S. F√º√ºsilistest ketastest t√µmmiste tegemine on ka huvitav, aga eraldi kirjat√ºkki v√§√§riv teema.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.sections", "header.autohide", "content.code.copy", "content.footnote.tooltips"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Kopeeritud", "clipboard.copy": "Kopeeri l\u00f5ikelauale", "search.result.more.one": "1 veel sellel lehel", "search.result.more.other": "# veel sellel lehel", "search.result.none": "Otsingule ei leitud \u00fchtegi vastet", "search.result.one": "Leiti \u00fcks tulemus", "search.result.other": "Leiti # tulemust", "search.result.placeholder": "Otsimiseks kirjuta siia", "search.result.term.missing": "Puudub", "select.version": "Vali versioon"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>